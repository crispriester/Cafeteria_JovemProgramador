<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Dulce Caffetteria - Você está perto?</title>

  <link rel="stylesheet" type="text/css" href="style.css" />
  <link rel="stylesheet" href="../../styles/style-footer.css">
  <link rel="stylesheet" href="../../styles/style-menu.css">
  <link rel="stylesheet" href="../../styles/style-scroll.css">

  <link rel="icon" type="imagem/png" href="../../assets/favicon-clara.png" />

</head>

<body>
  <!--MENU PRINCIPAL COMEÇA AQUI-->
  <header id="menu-home" class="bg-dark">
    <a href="../Main/index.html">
      <div id="div-imagem-menu" class="imagem-logo"></div>
    </a>

    <div class="divisoria"></div>
    <div class="botoes">
      <a href="../Produtos/index.html">
        Valores <div></div>
      </a>
      <a href="../Filiais/index.html">
        Localização <div class="selecionado"></div>
      </a>
      <a href="../Main/index.html#sobre">
        Sobre <div></div>
      </a>
    </div>
  </header>
  <!--MENU PRINCIPAL TERMINA AQUI-->
  
  <div id="container">
    <div class="display-flex">
      
      <h1 class="texto">Venha nos visitar</h1>
      <p>
        <label for="text1"> CEP </label>
        <input id="cep" type="text" name="text1" placeholder="00000000" maxlength="8" />
      </p>
      <input id="b1" type="button" value="Procurar filial" />
      <img id="img" src="../../assets/fachada-dolce-caffetteria.jpg" alt="Imagem Fachada" title="Fachada">
    </div>
    <div id="content" class="display-flex">
      <div class="flex-row">
        <img id="imagem-localizacao" src="../../assets/simbolo_localidade.png" alt="Simbolo Local"
          title="Simbolo local">
        <h2 class="texto">Filiais que possuímos</h2>
      </div>
      <h4>CEP 89068-001, Rua Pedro Zimmermann 756, Itoupava Central, Blumenau-SC</h4>
      <h4>CEP 89110‑004, Rua Adão Schmitt, 15, Centro, Gaspar-SC</h4>
      <h2 id="margin-top" class="texto">Seu endereço da pesquisa</h2>
      <h4 id="h2rua">Informe seu endereço</h4>
      <h4 id="h2bairro"></h4>
      <h4 id="h3cidade"></h4>
      <h4 id="mensagem"></h4>
    </div>
  </div>

  <!--FOOTER COMEÇA-->
  <footer>
    <div class="div-footer">
      <div class="info-footer">
        <div class="titulo-info">
          <h2>Contato</h2>
        </div>
        <div class="conteudo-info">
          <h3>dolce.caffetteria@gmail.com</h3>
          <h3>(47) 3337-2537 ou</h3>
          <h3>(47) 98451-2537</h3>
        </div>
      </div>
      <div class="info-footer">
        <div class="titulo-info">
          <h2>Endereço</h2>
        </div>
        <div class="conteudo-info">
          <h3>Rua Pedro Zimmermann, 756, </h3>
          <h3>Itoupava Central, Blumenau- SC</h3>
          <h3>Rua Adão Schmitt, 15, Centro, Gaspar-SC</h3>


        </div>
      </div>
      <div class="info-footer">
        <div class="titulo-info">
          <h2>Criadores</h2>
        </div>
        <div class="conteudo-info">
          <h3>Cristina Priester</h3>
          <h3>João Marcos da Silva</h3>
          <h3>Vanessa da Cunha Lopes</h3>
        </div>
      </div>
    </div>
  </footer>

  <script>
    async function validacao(cepInvalido) {
      if (document.getElementById("h3cidade").innerText == "Blumenau") {
        document.getElementById("mensagem").style.color = '#105e10'
        document.getElementById("mensagem").innerHTML = "Temos uma filial em Blumenau. Venha nos visitar! "
      }
      else if (document.getElementById("h3cidade").innerText == "Gaspar") {
        document.getElementById("mensagem").style.color = '#105e10'
        document.getElementById("mensagem").innerHTML = "Temos uma filial em Gaspar. Venha nos visitar!"
      }
      else {
        document.getElementById("mensagem").style.color = 'rgb(235, 10, 10)'
        document.getElementById("mensagem").innerHTML = cepInvalido ? "CEP Inválido!" : "Infelizmente ainda não temos uma filial em sua cidade "
      }
    }
    async function validarCep() {
      const cep = document.getElementById("cep").value;

      var validacep = /^[0-9]{8}$/;

      if (!validacep.test(cep)) {
        document.getElementById("h2rua").innerHTML = "";
        document.getElementById("h2bairro").innerHTML = "";
        document.getElementById("h3cidade").innerHTML = "";
        validacao(true);
      }
      else {
        const response = await fetch(`http://viacep.com.br/ws/${cep}/json/`);
        const json = await response.json();
        if (json.erro) {
          document.getElementById("h2rua").innerHTML = "";
          document.getElementById("h2bairro").innerHTML = "";
          document.getElementById("h3cidade").innerHTML = "";
          validacao(true);
        }
        else {
          document.getElementById("h2rua").innerHTML = json.logradouro;
          document.getElementById("h2bairro").innerHTML = json.bairro;
          document.getElementById("h3cidade").innerHTML = json.localidade;
          validacao(false);
        }
      }
    }
    document.getElementById("b1").addEventListener("click", validarCep); 
  </script>
</body>

</html>